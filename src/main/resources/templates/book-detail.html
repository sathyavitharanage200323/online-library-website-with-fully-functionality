<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${book.title} + ' - LibrarySE'">Book Details - LibrarySE</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">LibrarySE</div>
            <ul class="nav-links">
                <li><a th:href="@{/}">Home</a></li>
                <li><a th:href="@{/books}">Books</a></li>
                <li><a th:href="@{/staff}">Staff</a></li>
                <li><a th:href="@{/admin}" sec:authorize="hasRole('ADMIN')">Admin</a></li>
                <li><a th:href="@{/login}" sec:authorize="!isAuthenticated()">Login</a></li>
                <li>
                    <form th:action="@{/logout}" method="post" sec:authorize="isAuthenticated()">
                        <button type="submit" class="btn btn-outline">Logout</button>
                    </form>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="container">
            <section class="section">
                <div style="margin-bottom: 2rem;">
                    <a th:href="@{/books}" class="btn btn-outline">‚Üê Back to Books</a>
                </div>

                <div class="card" th:if="${book}">
                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; align-items: start;">
                        <!-- Book Cover -->
                        <div class="book-cover">
                            <img th:if="${book.coverImageUrl}" 
                                 th:src="${book.coverImageUrl}" 
                                 th:alt="${book.title}"
                                 style="width: 100%; max-width: 300px; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                            <div th:unless="${book.coverImageUrl}" 
                                 class="placeholder-cover"
                                 style="width: 100%; max-width: 300px; height: 400px; background: linear-gradient(135deg, #A04747, #D8A25E); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; text-align: center;">
                                <div>
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìö</div>
                                    <div th:text="${book.title}">Book Title</div>
                                </div>
                            </div>
                        </div>

                        <!-- Book Details -->
                        <div class="book-details">
                            <h1 th:text="${book.title}" style="color: #343131; margin-bottom: 1rem;">Book Title</h1>
                            
                            <div class="book-info">
                                <div class="info-row">
                                    <strong>Author:</strong>
                                    <span th:text="${book.author}">Author Name</span>
                                </div>
                                
                                <div class="info-row">
                                    <strong>ISBN:</strong>
                                    <span th:text="${book.isbn}">ISBN</span>
                                </div>
                                
                                <div class="info-row" th:if="${book.publicationDate}">
                                    <strong>Publication Date:</strong>
                                    <span th:text="${#temporals.format(book.publicationDate, 'MMMM dd, yyyy')}">Publication Date</span>
                                </div>
                                
                                <div class="info-row">
                                    <strong>Availability:</strong>
                                    <span th:class="${book.isAvailable} ? 'badge badge-success' : 'badge badge-danger'"
                                          th:text="${book.isAvailable} ? 'Available' : 'Unavailable'">Available</span>
                                </div>
                            </div>

                            <div th:if="${book.description}" class="book-description" style="margin-top: 2rem;">
                                <h3 style="color: #343131; margin-bottom: 1rem;">Description</h3>
                                <p th:text="${book.description}" style="line-height: 1.6; color: #666;">Book description...</p>
                            </div>

                            <div class="book-actions" style="margin-top: 2rem;">
                                <a th:href="@{/books}" class="btn btn-outline">Browse More Books</a>
                                <a th:href="@{/staff}" class="btn">Contact Staff</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div th:unless="${book}" class="card">
                    <h2>Book Not Found</h2>
                    <p>The book you're looking for doesn't exist or has been removed.</p>
                    <a th:href="@{/books}" class="btn">Browse All Books</a>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 LibrarySE. All rights reserved.</p>
        </div>
    </footer>

    <style>
        .book-info {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
        
        .info-row strong {
            color: #343131;
            min-width: 120px;
        }
        
        .book-description {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
        }
        
        .book-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .book-details {
                grid-template-columns: 1fr !important;
            }
            
            .book-cover {
                text-align: center;
            }
            
            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .info-row strong {
                min-width: auto;
            }
        }
    </style>
</body>
</html>
